using Nemerle;
using Nemerle.Assertions;
using Nemerle.Collections;
using Nemerle.Text;
using Nemerle.Utility;

using Nemerle.Test.Framework;

using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;

namespace Nemerle.Compiler.Test
{
  /// <summary>
  /// Description of ThreadRunner.
  /// </summary>
  internal sealed class ThreadRunner : Runner
  {
    public this([NotNull] executionListener : ExecutionListener, stackSize : int)
    {
      base(executionListener);
      _stackSize = stackSize;
    }

    public override Run([NotNull] tests : IEnumerable[Test]) : void
    {
      def thread = Thread(fun() { base.Run(tests) }, _stackSize);
      thread.Start();
      thread.Join();
    }

    private _stackSize : int;
  }
}
